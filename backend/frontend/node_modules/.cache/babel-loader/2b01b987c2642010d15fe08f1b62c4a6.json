{"ast":null,"code":"var _jsxFileName = \"E:\\\\git\\\\ebay\\\\frontend\\\\src\\\\pages\\\\single_order\\\\Single_order.jsx\",\n    _s = $RefreshSig$();\n\nimport { useLocation } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\nimport { UserContext } from \"../../userContext\";\nimport { CartContext } from \"../../cartContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Single_order() {\n  _s();\n\n  const {\n    usertop,\n    setUsertop\n  } = useContext(UserContext);\n  const location = useLocation();\n  const id = location.pathname.split(\"/\")[2];\n  const [orderdetails, setOrderdetails] = useState([]);\n  const [buyer, setBuyer] = useState(false);\n\n  const getSingleorder = () => {\n    axios({\n      method: \"GET\",\n      withCredentials: true,\n      url: \"http://localhost:4000/api/getproductsforcart/\" + id\n    }).then(res => {\n      setOrderdetails(res.data.row[0]);\n      console.log(res.data.row[0]);\n\n      if (res.data.row[0].user_id == usertop.id) {\n        setBuyer(true);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const markDelivered = order_id => {\n    axios({\n      method: \"POST\",\n      data: {\n        order_id\n      },\n      withCredentials: true,\n      url: \"http://localhost:4000/api/markasdelivered\"\n    }).then(res => {\n      if (res.data.message == \"successfully delivered\") {\n        swal({\n          title: \"You have successfully marked the order as delivered.\",\n          text: \"Customer can now accept the delivery to complete this order\",\n          icon: \"success\",\n          button: \"Ok\"\n        });\n      }\n\n      getSingleorder();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const orderReceived = order_id => {\n    axios({\n      method: \"POST\",\n      data: {\n        order_id\n      },\n      withCredentials: true,\n      url: \"http://localhost:4000/api/markascompleted\"\n    }).then(res => {\n      console.log(res);\n\n      if (res.data.message == \"order successfully completed\") {\n        swal({\n          title: \"You have successfully marked the order as completed.\",\n          text: \"\",\n          icon: \"success\",\n          button: \"Ok\"\n        });\n      }\n\n      getSingleorder();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    getSingleorder();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Buyer name: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 20\n        }, this), orderdetails.buyer_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Buyer Phone: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 20\n        }, this), orderdetails.buyer_phone]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Buyer Address: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 20\n        }, this), orderdetails.buyer_address]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Status: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 20\n        }, this), orderdetails.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Date: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 20\n        }, this), orderdetails.date]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), orderdetails.status == \"pending\" && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"red\",\n        children: \"Please deliver this order as soon as possible.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 54\n      }, this), buyer ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            orderReceived(orderdetails.id);\n          },\n          className: \"btn btn-primary btn-block mb-4\",\n          children: \"Received\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: orderdetails.status == \"delivered\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"green\",\n          children: \"Order submitted as delivered. please wait for the customer to accept.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 65\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            markDelivered(orderdetails.id);\n          },\n          className: \"btn btn-primary btn-block mb-4\",\n          children: \"Mark as delivered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 162\n        }, this)\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(Single_order, \"ZIboY/cqt6uFU8TzjAcToajj7kg=\", false, function () {\n  return [useLocation];\n});\n\n_c = Single_order;\n\nvar _c;\n\n$RefreshReg$(_c, \"Single_order\");","map":{"version":3,"sources":["E:/git/ebay/frontend/src/pages/single_order/Single_order.jsx"],"names":["useLocation","useState","useEffect","useContext","axios","swal","UserContext","CartContext","Single_order","usertop","setUsertop","location","id","pathname","split","orderdetails","setOrderdetails","buyer","setBuyer","getSingleorder","method","withCredentials","url","then","res","data","row","console","log","user_id","catch","error","markDelivered","order_id","message","title","text","icon","button","orderReceived","buyer_name","buyer_phone","buyer_address","status","date"],"mappings":"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","sourcesContent":["import { useLocation } from \"react-router-dom\";\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport swal from \"sweetalert\";\r\n\r\nimport { UserContext } from \"../../userContext\";\r\nimport { CartContext } from \"../../cartContext\";\r\n\r\nexport default function Single_order() {\r\n    const { usertop, setUsertop } = useContext(UserContext);\r\n    const location = useLocation();\r\n    const id = location.pathname.split(\"/\")[2];\r\n    const [orderdetails, setOrderdetails] = useState([])\r\n    const [buyer,setBuyer] = useState(false)\r\n\r\n    const getSingleorder = () => {\r\n        axios({\r\n            method: \"GET\",\r\n            withCredentials: true,\r\n            url: \"http://localhost:4000/api/getproductsforcart/\" + id,\r\n        })\r\n            .then((res) => {\r\n\r\n                setOrderdetails(res.data.row[0])\r\n                console.log(res.data.row[0])\r\n                if(res.data.row[0].user_id == usertop.id){\r\n                    setBuyer(true)\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    const markDelivered = (order_id) => {\r\n\r\n\r\n        axios({\r\n            method: \"POST\",\r\n            data: {\r\n                order_id,\r\n            },\r\n            withCredentials: true,\r\n            url: \"http://localhost:4000/api/markasdelivered\",\r\n        })\r\n            .then((res) => {\r\n                \r\n\r\n                if(res.data.message == \"successfully delivered\"){\r\n                    swal({\r\n                      title: \"You have successfully marked the order as delivered.\",\r\n                      text: \"Customer can now accept the delivery to complete this order\",\r\n                      icon: \"success\",\r\n                      button: \"Ok\",\r\n                    });\r\n                  }\r\n                  getSingleorder();\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n\r\n    }\r\n\r\n    const orderReceived = (order_id) => {\r\n        axios({\r\n            method: \"POST\",\r\n            data: {\r\n                order_id,\r\n            },\r\n            withCredentials: true,\r\n            url: \"http://localhost:4000/api/markascompleted\",\r\n        })\r\n            .then((res) => {\r\n                console.log(res)\r\n                \r\n\r\n                if(res.data.message == \"order successfully completed\"){\r\n                    swal({\r\n                      title: \"You have successfully marked the order as completed.\",\r\n                      text: \"\",\r\n                      icon: \"success\",\r\n                      button: \"Ok\",\r\n                    });\r\n                  }\r\n                  getSingleorder();\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    useEffect(() => {\r\n        getSingleorder();\r\n        \r\n    }, [])\r\n    return (\r\n        <>\r\n            <div className=\"page\">\r\n                <p><b>Buyer name: </b>{orderdetails.buyer_name}</p>\r\n                <p><b>Buyer Phone: </b>{orderdetails.buyer_phone}</p>\r\n                <p><b>Buyer Address: </b>{orderdetails.buyer_address}</p>\r\n                <p><b>Status: </b>{orderdetails.status}</p>\r\n                <p><b>Date: </b>{orderdetails.date}</p>\r\n                {orderdetails.status == \"pending\" && <p className=\"red\">Please deliver this order as soon as possible.</p>}\r\n\r\n                {buyer ? (<>\r\n                <button onClick={()=>{\r\n                    orderReceived(orderdetails.id);\r\n                }} className=\"btn btn-primary btn-block mb-4\">Received</button>\r\n                </>) : (<>{orderdetails.status == \"delivered\" ? <p className=\"green\">Order submitted as delivered. please wait for the customer to accept.</p> : <button onClick={()=>{\r\n                    markDelivered(orderdetails.id);\r\n                }} className=\"btn btn-primary btn-block mb-4\">Mark as delivered</button>}</>) }\r\n                \r\n                \r\n\r\n                \r\n            </div>\r\n        </>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}